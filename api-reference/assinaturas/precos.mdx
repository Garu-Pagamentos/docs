---
title: "Preços de Assinatura"
description: "Criar e gerenciar planos de preço para produtos de assinatura"
api: "POST /api/subscription-prices"
---

## Visão Geral

Preços de assinatura definem quanto e com que frequência os clientes serão cobrados. Um produto pode ter múltiplos preços (ex: mensal, anual).

## Criar Preço de Assinatura

<ParamField body="productId" type="integer" required>
  ID do produto pai (deve ser do tipo `subscription`).
</ParamField>

<ParamField body="name" type="string" required>
  Nome do plano exibido ao cliente (ex: "Plano Mensal").
</ParamField>

<ParamField body="amount" type="integer" required>
  Valor em centavos (4990 = R$ 49,90).
</ParamField>

<ParamField body="billingInterval" type="string" required>
  Intervalo de cobrança: `weekly`, `monthly`, `quarterly`, `annually`.
</ParamField>

<ParamField body="trialDays" type="integer">
  Dias de teste gratuito antes da primeira cobrança (padrão: 0).
</ParamField>

<ParamField body="isActive" type="boolean">
  Se o plano está disponível para novos assinantes (padrão: true).
</ParamField>

### Exemplo de Requisição

<CodeGroup>

```bash cURL
curl -X POST https://api.garu.com.br/api/subscription-prices \
  -H "Authorization: Bearer sk_test_sua_chave" \
  -H "Content-Type: application/json" \
  -d '{
    "productId": 123,
    "name": "Plano Mensal",
    "amount": 4990,
    "billingInterval": "monthly",
    "trialDays": 7
  }'
```

```javascript JavaScript
const response = await fetch('https://api.garu.com.br/api/subscription-prices', {
  method: 'POST',
  headers: {
    'Authorization': `Bearer ${process.env.GARU_API_KEY}`,
    'Content-Type': 'application/json'
  },
  body: JSON.stringify({
    productId: 123,
    name: 'Plano Mensal',
    amount: 4990,
    billingInterval: 'monthly',
    trialDays: 7
  })
});

const preco = await response.json();
console.log(`Checkout: https://garu.com.br/pay/${productUuid}?priceId=${preco.uuid}`);
```

```python Python
import requests
import os

response = requests.post(
    'https://api.garu.com.br/api/subscription-prices',
    headers={
        'Authorization': f'Bearer {os.environ["GARU_API_KEY"]}',
        'Content-Type': 'application/json'
    },
    json={
        'productId': 123,
        'name': 'Plano Mensal',
        'amount': 4990,
        'billingInterval': 'monthly',
        'trialDays': 7
    }
)

preco = response.json()
print(f"Preço criado: {preco['uuid']}")
```

</CodeGroup>

### Resposta de Sucesso (201 Created)

```json
{
  "id": 456,
  "uuid": "price_def456uvw",
  "productId": 123,
  "sellerId": 1,
  "name": "Plano Mensal",
  "amount": 4990,
  "billingInterval": "monthly",
  "trialDays": 7,
  "isActive": true,
  "createdAt": "2024-01-15T10:35:00.000Z",
  "updatedAt": "2024-01-15T10:35:00.000Z"
}
```

## Listar Preços de Assinatura

Retorna todos os preços de assinatura do vendedor autenticado.

```bash
curl -X GET https://api.garu.com.br/api/subscription-prices \
  -H "Authorization: Bearer sk_test_sua_chave"
```

### Resposta

```json
{
  "data": [
    {
      "id": 456,
      "uuid": "price_def456uvw",
      "productId": 123,
      "name": "Plano Mensal",
      "amount": 4990,
      "billingInterval": "monthly",
      "trialDays": 7,
      "isActive": true
    },
    {
      "id": 457,
      "uuid": "price_ghi789abc",
      "productId": 123,
      "name": "Plano Anual",
      "amount": 47900,
      "billingInterval": "annually",
      "trialDays": 14,
      "isActive": true
    }
  ]
}
```

## Buscar Preço por ID

```bash
curl -X GET https://api.garu.com.br/api/subscription-prices/456 \
  -H "Authorization: Bearer sk_test_sua_chave"
```

## Atualizar Preço de Assinatura

Atualiza um preço existente. Alterações de valor afetam apenas novas assinaturas.

```bash
curl -X PATCH https://api.garu.com.br/api/subscription-prices/456 \
  -H "Authorization: Bearer sk_test_sua_chave" \
  -H "Content-Type: application/json" \
  -d '{
    "name": "Plano Mensal Premium",
    "amount": 5990,
    "isActive": true
  }'
```

### Campos Atualizáveis

| Campo | Descrição |
|-------|-----------|
| `name` | Nome do plano |
| `amount` | Valor (afeta novas assinaturas) |
| `trialDays` | Dias de teste (afeta novas assinaturas) |
| `isActive` | Disponibilidade do plano |

<Warning>
  Alterações de `amount` e `trialDays` afetam apenas **novas** assinaturas. Assinaturas existentes mantêm os valores originais.
</Warning>

## Excluir Preço de Assinatura

```bash
curl -X DELETE https://api.garu.com.br/api/subscription-prices/456 \
  -H "Authorization: Bearer sk_test_sua_chave"
```

<Warning>
  Não é possível excluir preços com assinaturas ativas. Desative o preço (`isActive: false`) em vez de excluir.
</Warning>

## Múltiplos Planos

Crie diferentes planos para o mesmo produto:

```javascript
// Plano Básico - Mensal
await criarPreco({
  productId: 123,
  name: 'Básico Mensal',
  amount: 2990,
  billingInterval: 'monthly'
});

// Plano Pro - Mensal
await criarPreco({
  productId: 123,
  name: 'Pro Mensal',
  amount: 4990,
  billingInterval: 'monthly',
  trialDays: 7
});

// Plano Pro - Anual (com desconto de 20%)
await criarPreco({
  productId: 123,
  name: 'Pro Anual',
  amount: 47900, // 12 meses com 20% de desconto
  billingInterval: 'annually',
  trialDays: 14
});
```

## Link de Checkout

Após criar o preço, construa o link de checkout:

```
https://garu.com.br/pay/{product_uuid}?priceId={price_uuid}
```

**Exemplo:**
```
https://garu.com.br/pay/prod_abc123xyz?priceId=price_def456uvw
```

## Próximos Passos

<CardGroup cols={2}>
  <Card title="Gerenciar Assinaturas" icon="sliders" href="/api-reference/assinaturas/gerenciar">
    Listar, cancelar e pausar assinaturas
  </Card>
  <Card title="Portal do Cliente" icon="user" href="/api-reference/assinaturas/portal">
    Autoatendimento para assinantes
  </Card>
</CardGroup>
